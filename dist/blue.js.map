{"version":3,"sources":["blue.js","_scroll.es6","_scroll_state.es6","_nav_logo.es6","_nav_visibility.es6","_nav.es6","_nav_state.js"],"names":["_classCallCheck","instance","Constructor","TypeError","$","checkScroll","didScroll","undefined","lastScrollTop","currentScrollTop","setInterval","document","scrollTop","window","subvisual","nav","bar","update","onscroll","setTimeout","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","ScrollState","this","delta","value","elementHeight","Math","abs","logo","showMonoLogo","$element","removeClass","addClass","showColoredLogo","$navLogo","backgroundIsLight","$el","isOpen","hasClass","isFixed","isTransparent","find","updateWithScroll","scrollState","hasPassedTheElement","outerHeight","visibility","updateAfterAnimation","addEventListener","e","animationName","unaffixNav","isAtTheTop","hideNav","affixNav","hasntScrolledEnough","hasScrolledDown","navVisibility","navLogo","closeOverlay","open","body","css","burger","navOverlay","openOverlay","bindFocusEvents","navOverlayFirstItem","on","which","shiftKey","menu","focus","preventDefault"],"mappings":"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","file":"blue.js","sourcesContent":[null,"$(function() {\n  let didScroll;\n  let lastScrollTop = 0;\n  let currentScrollTop;\n\n  function checkScroll() {\n    didScroll = true;\n  }\n\n  setInterval(function() {\n    if (didScroll) {\n      currentScrollTop = $(document).scrollTop();\n      window.subvisual.nav.bar.update(currentScrollTop, lastScrollTop);\n      lastScrollTop = currentScrollTop;\n\n      didScroll = false;\n    }\n  }, 250);\n\n  window.onscroll = checkScroll;\n  setTimeout(checkScroll, 50);\n});\n","class ScrollState {\n  constructor(currentScrollTop, lastScrollTop) {\n    this.currentScrollTop = currentScrollTop;\n    this.lastScrollTop = lastScrollTop;\n    this.delta = 50;\n  }\n\n  hasScrolledDown() {\n    return this.currentScrollTop > this.lastScrollTop;\n  }\n\n  hasPassedTheElement(elementHeight) {\n    return this.currentScrollTop > elementHeight;\n  }\n\n  isAtTheTop() {\n    return this.currentScrollTop == 0;\n  }\n\n  hasntScrolledEnough() {\n    return Math.abs(this.lastScrollTop - this.currentScrollTop) <= this.delta;\n  }\n}\n","$(function(){\n  window.subvisual = window.subvisual || {};\n  window.subvisual.nav = window.subvisual.nav || {};\n  window.subvisual.nav.logo = (function() {\n\n    function showMonoLogo($element) {\n      $element.removeClass('NavLogo--color').addClass('NavLogo--mono');\n    }\n\n    function showColoredLogo($element, $navLogo) {\n      $element.removeClass('NavLogo--mono').addClass('NavLogo--color');\n    }\n\n    function backgroundIsLight($el) {\n      var\n        isOpen = $el.hasClass('is-open'),\n        isFixed = $el.hasClass('Nav--fixed'),\n        isTransparent = $el.hasClass('Nav--light') || $el.hasClass('Nav--transparent');\n\n      return isOpen || (isTransparent && isFixed) || (!isTransparent);\n    }\n\n    function update($element) {\n      var $navLogo = $element.find('.NavLogo');\n\n      if (backgroundIsLight($element)) {\n        showColoredLogo($navLogo);\n      } else {\n        showMonoLogo($navLogo);\n      }\n    }\n\n    function updateWithScroll(scrollState, $element) {\n      var $navLogo = $element.find('.NavLogo');\n\n      if (scrollState.hasPassedTheElement($element.outerHeight())) {\n        showColoredLogo($navLogo);\n      } else {\n        update($element);\n      }\n    }\n\n    return { update, updateWithScroll };\n  })();\n});\n","$(function(){\n  window.subvisual = window.subvisual || {};\n  window.subvisual.nav = window.subvisual.nav || {};\n  window.subvisual.nav.visibility = (function() {\n    function updateAfterAnimation($element) {\n      if (!$element[0]) {\n        return;\n      }\n\n      $element[0].addEventListener(\"animationend\", function(e) {\n        if (e.animationName == 'slideup') {\n          $element.addClass('Nav--hint');\n          $element.removeClass('Nav--fixed');\n          $element.removeClass('Nav--animateUp');\n          $element.find('.Burger').removeClass('Burger--fixed');\n        }\n      }, false);\n    }\n\n    function unaffixNav(isAtTheTop, $element) {\n      if (isAtTheTop) {\n        $element.removeClass('Nav--fixed');\n        $element.removeClass('Nav--hint');\n        $element.find('.Burger').removeClass('Burger--fixed');\n      }\n    }\n\n    function hideNav(hasPassedTheElement, $element) {\n      if ($element.hasClass('Nav--fixed')) {\n        $element.addClass('Nav--animateUp');\n      } else if (hasPassedTheElement) {\n        $element.addClass('Nav--hint');\n      }\n    }\n\n    function affixNav(hasPassedTheElement, $element) {\n      if ((!hasPassedTheElement && $element.hasClass('Nav--fixed')) || hasPassedTheElement) {\n        $element.addClass('Nav--fixed');\n        $element.removeClass('Nav--hint');\n        $element.find('.Burger').addClass('Burger--fixed');\n      } else if (!hasPassedTheElement) {\n        $element.removeClass('Nav--hint');\n      }\n    }\n\n    function update(scrollState, $element) {\n      unaffixNav(scrollState.isAtTheTop(), $element);\n\n      if (scrollState.hasntScrolledEnough())\n        return;\n\n      let hasPassedTheElement = scrollState.hasPassedTheElement($element.outerHeight());\n\n      if (scrollState.hasScrolledDown()) {\n        hideNav(hasPassedTheElement, $element);\n      } else {\n        affixNav(hasPassedTheElement, $element);\n      }\n    }\n\n    return { update, updateAfterAnimation };\n  })();\n});\n","$(function() {\n  window.subvisual = window.subvisual || {};\n  window.subvisual.nav = window.subvisual.nav || {};\n  window.subvisual.nav.bar = (function() {\n    let $element = $('.Nav');\n    let navLogo = window.subvisual.nav.logo;\n    let navVisibility = window.subvisual.nav.visibility;\n\n    function update(currentScrollTop, lastScrollTop) {\n      let scrollState = new ScrollState(currentScrollTop, lastScrollTop);\n\n      navVisibility.update(scrollState, $element);\n      navLogo.updateWithScroll(scrollState, $element);\n    }\n\n    navLogo.update($element);\n    navVisibility.updateAfterAnimation($element);\n\n    return { update };\n  })();\n});\n","$(function() {\n  var body = $('body');\n  var nav = $('.Nav');\n  var navOverlay = $('.NavOverlay');\n  var menu = $('.Nav-menu');\n  var burger = nav.find('.Burger');\n  var navOverlayFirstItem = $('.NavOverlay .NavOverlay-item:first .NavOverlay-link');\n\n  closeOverlay();\n  bindFocusEvents();\n\n  var open = false;\n\n  nav.on('click', '.Nav-menu', function() {\n    if (!open) {\n      openOverlay();\n    } else {\n      closeOverlay();\n    }\n    window.subvisual.nav.logo.update(nav);\n  });\n\n  // remove from accesibility tree when hidden.\n  navOverlay.on('transitionend', function() {\n    if (!open)\n      navOverlay.css('display', 'none');\n  });\n\n  function closeOverlay() {\n    open = false;\n    body.css('overflow', 'auto');\n\n    burger.removeClass('is-open');\n    nav.removeClass('is-open');\n    navOverlay.removeClass('is-open');\n  }\n\n  function openOverlay() {\n    open = true;\n    body.css('overflow', 'hidden');\n\n    burger.addClass('is-open');\n    nav.addClass('is-open');\n    navOverlay.css('display', 'block');\n    navOverlay.addClass('is-open');\n  }\n\n  function bindFocusEvents() {\n    navOverlayFirstItem.on('keydown', function(e) {\n      if (e.which == 9 && e.shiftKey) { // 9 is the keyCode for TAB\n        menu.focus();\n        e.preventDefault();\n      }\n    });\n\n    menu.on('keydown', function(e) {\n      if (open && e.which == 9 && !e.shiftKey) { // 9 is the keyCode for TAB\n        navOverlayFirstItem.focus();\n        e.preventDefault();\n      }\n    });\n\n    $('body').on('keydown', function(e) {\n      if (open && e.which == 27) // 27 is the keyCode for ESC\n        closeOverlay();\n    });\n  }\n});\n"],"sourceRoot":"/source/"}